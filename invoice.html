<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙØ§ØªÙˆØ±Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</title>
    <style>
        body {
            font-family: 'Cairo', sans-serif;
            background: #f6f6f6;
            margin: 0;
            padding: 20px;
        }

        .invoice-box {
            max-width: 800px;
            margin: auto;
            background: white;
            border: 1px solid #ccc;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 10px;
        }

        .header h2 {
            color: #2e7d32;
            margin: 0;
        }

        .details {
            margin-top: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 8px;
            background: #f9f9f9;
            padding: 10px;
            border-radius: 8px;
            font-weight: bold;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th,
        td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: center;
        }

        th {
            background: #4CAF50;
            color: white;
        }

        .total-box {
            margin-top: 20px;
            text-align: left;
            font-size: 1.1em;
            font-weight: bold;
        }

        .print-btn {
            display: block;
            margin: 30px auto 10px;
            padding: 10px 25px;
            font-size: 16px;
            background: #2e7d32;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }

        .print-btn:hover {
            background: #1b5e20;
        }
    </style>
</head>

<body>
    <div class="invoice-box">
        <div class="header">
            <div>
                <h2>ÙØ§ØªÙˆØ±Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</h2>
                <p>Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©: <span id="invNumber"></span></p>
                <p>Ø§Ù„ØªØ§Ø±ÙŠØ®: <span id="invDate"></span></p>
            </div>
            <img src="https://images.pexels.com/photos/13270364/pexels-photo-13270364.jpeg" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ø´Ø±ÙƒØ©"
                style="width:120px;height:auto;">
        </div>

        <div class="details">
            <div>ğŸ’¼ ÙƒÙˆØ¯ Ø§Ù„Ø¨Ø§Ø¦Ø¹: <span id="sellerCode"></span></div>
            <div>ğŸ‘¤ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„: <span id="custName"></span></div>
            <div>ğŸ“ Ø§Ù„Ù‡Ø§ØªÙ: <span id="custPhone"></span></div>
            <div>ğŸ™ï¸ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©: <span id="custCity"></span></div>
            <div>ğŸ“ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: <span id="custAddress"></span></div>
        </div>

        <table>
            <thead>
                <tr>
                    <th>Ø§Ù„Ù…Ù†ØªØ¬</th>
                    <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
                    <th>Ø§Ù„Ø³Ø¹Ø±</th>
                    <th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>
                </tr>
            </thead>
            <tbody id="itemTable"></tbody>
        </table>

        <div class="total-box">
            <p>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù‚Ø¨Ù„ Ø§Ù„Ø´Ø­Ù†: <span id="total"></span> Ø¬.Ù…</p>
            <p>Ø§Ù„Ø´Ø­Ù†: <span id="shipping"></span> Ø¬.Ù…</p>
            <p>Ø§Ù„Ø¹Ø±Ø¨ÙˆÙ†: <span id="deposit"></span> Ø¬.Ù…</p>
            <p>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚: <span id="finalTotal"></span> Ø¬.Ù…</p>
        </div>

        <button class="print-btn" onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©</button>
    </div>

    <script>
        const data = JSON.parse(localStorage.getItem("lastInvoice"));
        if (data) {
            document.getElementById('invNumber').textContent = data.number;
            document.getElementById('invDate').textContent = data.date;
            document.getElementById('custName').textContent = data.custName;
            document.getElementById('custPhone').textContent = data.custPhone;
            document.getElementById('custCity').textContent = data.custCity;
            document.getElementById('custAddress').textContent = data.custAddress;
            document.getElementById('sellerCode').textContent = data.sellerCode;
            document.getElementById('shipping').textContent = data.shipping;
            document.getElementById('deposit').textContent = data.deposit;

            const tbody = document.getElementById('itemTable');
            data.items.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
      <td>${item.name}</td>
      <td>${item.qty}</td>
      <td>${item.price}</td>
      <td>${item.total}</td>
    `;
                tbody.appendChild(row);
            });

            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚ Ø¨Ø¹Ø¯ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø´Ø­Ù† ÙˆØ·Ø±Ø­ Ø§Ù„Ø¹Ø±Ø¨ÙˆÙ†
            const final = parseFloat(data.total || 0) + parseFloat(data.shipping || 0) - parseFloat(data.deposit || 0);
            document.getElementById('total').textContent = data.total;
            document.getElementById('finalTotal').textContent = final.toFixed(2);
        }
    </script>
</body>

</html>
